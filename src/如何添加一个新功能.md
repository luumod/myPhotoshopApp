## 主功能：





## 子功能：比较简单的功能

示例：实现灰度图的分段线性对比度展宽

1. 在BaseOperate函数中，添加函数的定义与实现：

```CPP
void BaseOperate::contrastLinearBroaden()
{
	//对比度线性展宽 (f1,f2) --> (g1,g2)
	cv::Mat grayMat;
	//转换为灰度图
	cv::cvtColor(get()->res->curr_mt, grayMat, cv::COLOR_BGR2GRAY);

	double f1, f2;
	cv::minMaxLoc(grayMat, &f1, &f2);
	double g1 = 0.0, g2 = 255.0;

	double k1 = g1 / f1;
	double k2 = (g2 - g1) / (f2 - f1);
	double k3 = (255 - g2) / (255 - f2);

	for (int i = 0; i < grayMat.rows; i++) {
		for (int j = 0; j < grayMat.cols; j++) {
			uchar pix = grayMat.at<uchar>(i, j);
			if (pix >= 0 && pix < f1) {
				grayMat.at<uchar>(i, j) = cv::saturate_cast<uchar>(k1 * pix);
			}
			else if (pix >= f1 && pix <= f2) {
				grayMat.at<uchar>(i, j) = cv::saturate_cast<uchar>(k2 * (pix - f1) + g1);
			}
			else if (pix > f2 && pix <= 255) {
				grayMat.at<uchar>(i, j) = cv::saturate_cast<uchar>(k3 * (pix - f2) + g2);
			}
		}
	}
	show_wid->lab_img->setPixmap(QPixmap::fromImage(Mat2QImage(grayMat)));
	show_wid->show();
}
```

2. Widget.cpp中添加行为的定义与响应

```cpp
QMenu* menu_contrastLinear = new QMenu("对比度线性展宽", this);
menu_contrastLinear->addAction("灰度图", this, [=]() {img_base->showContrastLinearBroaden(); });
menu_contrastLinear->addAction("彩色图", this, [=]() {img_base->showBGRContrastLinearBroaden(); });
menu_func->addMenu(menu_contrastLinear);
menu_func->addSeparator();
menu_func->addAction(action_fileInfo); //图片属性信息
```



